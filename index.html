<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jungle Survival</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #1a3300;
            background-image: url('https://cdnjs.cloudflare.com/ajax/libs/simple-icons/3.0.1/simple-icons.svg'); /* Placeholder for jungle background */
            background-size: cover;
        }
        .player {
            position: absolute;
            width: 30px;
            height: 50px;
            background-color: #ff9900;
            border-radius: 50% 50% 0 0;
            transform-origin: center bottom;
        }
        .stick {
            position: absolute;
            width: 40px;
            height: 5px;
            background-color: #663300;
            transform-origin: 0 center;
        }
        #hud {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 18px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
        #players-list {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            max-width: 200px;
        }
        #store {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            color: white;
            width: 300px;
        }
        .store-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #333;
        }
        .buy-button {
            background-color: #ff9900;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        #shop-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background-color: #ff9900;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="hud">
            Health: <span id="health">100</span><br>
            Kills: <span id="kills">0</span><br>
            Coins: <span id="coins">0</span>
        </div>
        
        <div id="players-list">
            <h3>Players Online</h3>
            <ul id="players"></ul>
        </div>
        
        <button id="shop-button">SHOP</button>
        
        <div id="store">
            <h2>Jungle Store</h2>
            <div class="store-item">
                <span>Premium Skin</span>
                <button class="buy-button" data-item="skin" data-price="100">Buy $1.99</button>
            </div>
            <div class="store-item">
                <span>Golden Stick</span>
                <button class="buy-button" data-item="stick" data-price="200">Buy $2.99</button>
            </div>
            <div class="store-item">
                <span>Battle Pass</span>
                <button class="buy-button" data-item="battlepass" data-price="500">Buy $4.99</button>
            </div>
            <button id="close-store">Close</button>
        </div>
    </div>

    <script>
        // Game variables
        let player = {
            x: Math.random() * window.innerWidth,
            y: Math.random() * window.innerHeight,
            rotation: 0,
            health: 100,
            kills: 0,
            coins: 0,
            attacking: false,
            inventory: {
                skin: 'default',
                stick: 'default',
                battlepass: false
            }
        };
        
        // Simulate other players
        let otherPlayers = [];
        for (let i = 0; i < 5; i++) {
            otherPlayers.push({
                id: 'player' + i,
                name: 'Player ' + i,
                x: Math.random() * window.innerWidth,
                y: Math.random() * window.innerHeight,
                health: 100,
            });
        }
        
        // DOM elements
        const gameContainer = document.getElementById('game-container');
        const healthDisplay = document.getElementById('health');
        const killsDisplay = document.getElementById('kills');
        const coinsDisplay = document.getElementById('coins');
        const playersListElement = document.getElementById('players');
        const shopButton = document.getElementById('shop-button');
        const storeElement = document.getElementById('store');
        const closeStoreButton = document.getElementById('close-store');
        const buyButtons = document.querySelectorAll('.buy-button');
        
        // Create player element
        const playerElement = document.createElement('div');
        playerElement.className = 'player';
        gameContainer.appendChild(playerElement);
        
        // Create player stick
        const stickElement = document.createElement('div');
        stickElement.className = 'stick';
        playerElement.appendChild(stickElement);
        
        // Create other player elements
        otherPlayers.forEach(otherPlayer => {
            const otherPlayerElement = document.createElement('div');
            otherPlayerElement.className = 'player';
            otherPlayerElement.style.backgroundColor = '#ff0000';
            otherPlayerElement.style.left = otherPlayer.x + 'px';
            otherPlayerElement.style.top = otherPlayer.y + 'px';
            otherPlayerElement.id = otherPlayer.id;
            gameContainer.appendChild(otherPlayerElement);
            
            // Add player to the list
            const playerItem = document.createElement('li');
            playerItem.textContent = otherPlayer.name;
            playersListElement.appendChild(playerItem);
        });
        
        // Event listeners
        document.addEventListener('mousemove', (e) => {
            // Calculate rotation
            const dx = e.clientX - player.x;
            const dy = e.clientY - player.y;
            player.rotation = Math.atan2(dy, dx);
        });
        
        document.addEventListener('keydown', (e) => {
            const speed = 5;
            // WASD controls
            if (e.key === 'w') player.y -= speed;
            if (e.key === 'a') player.x -= speed;
            if (e.key === 's') player.y += speed;
            if (e.key === 'd') player.x += speed;
            
            // Keep player within bounds
            player.x = Math.max(0, Math.min(window.innerWidth - 30, player.x));
            player.y = Math.max(0, Math.min(window.innerHeight - 50, player.y));
        });
        
        document.addEventListener('mousedown', () => {
            player.attacking = true;
            checkAttacks();
            setTimeout(() => {
                player.attacking = false;
            }, 300);
        });
        
        shopButton.addEventListener('click', () => {
            storeElement.style.display = 'block';
        });
        
        closeStoreButton.addEventListener('click', () => {
            storeElement.style.display = 'none';
        });
        
        buyButtons.forEach(button => {
            button.addEventListener('click', () => {
                const item = button.getAttribute('data-item');
                const price = parseInt(button.getAttribute('data-price'));
                
                // Simulating a purchase - in real implementation, this would connect to a payment processor
                alert(`This would connect to a payment processor for a real purchase of ${item} for $${(price/100).toFixed(2)}`);
                
                // Simulate successful purchase
                player.inventory[item] = 'premium';
                
                // Update player appearance based on purchases
                if (item === 'skin') {
                    playerElement.style.backgroundColor = '#00ffff';
                }
                if (item === 'stick') {
                    stickElement.style.backgroundColor = '#ffd700';
                }
                
                storeElement.style.display = 'none';
            });
        });
        
        // Game update loop
        function update() {
            // Update player position
            playerElement.style.left = player.x + 'px';
            playerElement.style.top = player.y + 'px';
            
            // Update stick rotation
            stickElement.style.transform = `rotate(${player.rotation}rad)`;
            stickElement.style.left = '15px';
            
            // Update HUD
            healthDisplay.textContent = player.health;
            killsDisplay.textContent = player.kills;
            coinsDisplay.textContent = player.coins;
            
            // Simple AI for other players - they move randomly
            otherPlayers.forEach(otherPlayer => {
                if (otherPlayer.health <= 0) return;
                
                // Random movement
                if (Math.random() < 0.05) {
                    otherPlayer.x += (Math.random() - 0.5) * 20;
                    otherPlayer.y += (Math.random() - 0.5) * 20;
                    
                    // Keep AI within bounds
                    otherPlayer.x = Math.max(0, Math.min(window.innerWidth - 30, otherPlayer.x));
                    otherPlayer.y = Math.max(0, Math.min(window.innerHeight - 50, otherPlayer.y));
                    
                    const otherPlayerElement = document.getElementById(otherPlayer.id);
                    if (otherPlayerElement) {
                        otherPlayerElement.style.left = otherPlayer.x + 'px';
                        otherPlayerElement.style.top = otherPlayer.y + 'px';
                    }
                }
            });
            
            requestAnimationFrame(update);
        }
        
        // Check for attacks and hits
        function checkAttacks() {
            if (!player.attacking) return;
            
            const playerRadius = 15;
            const stickRange = 40;
            
            otherPlayers.forEach(otherPlayer => {
                if (otherPlayer.health <= 0) return;
                
                // Calculate distance between player and other player
                const dx = otherPlayer.x - player.x;
                const dy = otherPlayer.y - player.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                // Check if the stick can hit the other player based on distance and angle
                const angleDiff = Math.abs(Math.atan2(dy, dx) - player.rotation);
                if (distance < playerRadius + stickRange && angleDiff < 0.5) {
                    // Hit! Reduce health and check for defeat
                    otherPlayer.health -= 20;
                    
                    if (otherPlayer.health <= 0) {
                        // Player defeated
                        const otherPlayerElement = document.getElementById(otherPlayer.id);
                        if (otherPlayerElement) {
                            otherPlayerElement.style.opacity = 0.3;
                        }
                        
                        player.kills++;
                        player.coins += 10;
                        
                        // Respawn after 5 seconds
                        setTimeout(() => {
                            otherPlayer.health = 100;
                            otherPlayer.x = Math.random() * window.innerWidth;
                            otherPlayer.y = Math.random() * window.innerHeight;
                            
                            const otherPlayerElement = document.getElementById(otherPlayer.id);
                            if (otherPlayerElement) {
                                otherPlayerElement.style.opacity = 1;
                                otherPlayerElement.style.left = otherPlayer.x + 'px';
                                otherPlayerElement.style.top = otherPlayer.y + 'px';
                            }
                        }, 5000);
                    }
                }
            });
        }
        
        // Start the game
        update();
    </script>
</body>
</html>